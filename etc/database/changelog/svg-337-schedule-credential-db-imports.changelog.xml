<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet author="sv" id="svg-337-1-drop-column-storage-location" context="cdm">
        <dropColumn columnName="storage_location" tableName="credential_databases"/>
    </changeSet>

    <changeSet author="sv" id="svg-337-2-drop-column-storage-path" context="cdm">
        <dropColumn columnName="storage_path" tableName="credential_databases"/>
    </changeSet>

    <changeSet author="sv" id="svg-337-3-drop-column-source-location" context="cdm">
        <dropColumn columnName="source_location" tableName="credential_databases"/>
    </changeSet>

    <changeSet author="sv" id="svg-337-4-rename-column-source-path-to-source-uri" context="cdm">
        <renameColumn newColumnName="source_uri"
                      oldColumnName="source_path"
                      columnDataType="VARCHAR(500)"
                      tableName="credential_databases"/>
    </changeSet>

    <changeSet author="sv" id="svg-337-5-add-column-auto-import" context="cdm">
        <addColumn tableName="credential_databases" >
            <column name="auto_seed" type="tinyint(1)" afterColumn="source_uri" value="0"/>
        </addColumn>
    </changeSet>

    <changeSet author="sv" id="svg-337-6-insert-credential-database-rows" context="cdm">
        <insert tableName="credential_databases">
            <column name="prefix" value="njcredential"/>
            <column name="description" value="NJ Credential Database"/>
            <column name="source_uri" value="https://newjersey.mylicense.com"/>
            <column name="auto_seed" value="1" />
        </insert>
        <insert tableName="credential_databases">
            <column name="prefix" value="nppes"/>
            <column name="description" value="NPPES Credential Database"/>
            <column name="source_uri" value="http://download.cms.gov/nppes/NPI_Files.html"/>
            <column name="auto_seed" value="1" />
        </insert>
        <insert tableName="credential_databases">
            <column name="prefix" value="njna"/>
            <column name="description" value="NJNA Credential Database"/>
            <column name="source_uri" value="https://s3.amazonaws.com/StreamlineVerify-Storage/credential-databases/NJNA/Report_ActiveNA_06012016.csv"/>
            <column name="auto_seed" value="1" />
        </insert>
    </changeSet>

</databaseChangeLog>